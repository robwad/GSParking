<br>
<br>
<br>
<br>


<br>
<h1 align="center"> Redeem Your Rewards </h3>
<% if session[:increase] %>
<div class="alert alert-success" role="alert" align="center">
  Congrats! You've earned 20 Reward Points!
</div>
<% end %>
<% if session[:redeemed] %>
<div class="alert alert-success" role="alert" align="center">
  Your item has been redeemed! Instructions have been emailed to you.
</div>
<% end %>
<h4 align="center"> You Have <strong><%= @current.points %></strong> Reward Points</h4>
<br>


<div style="max-width: 600px; margin: auto;" class="card-deck">
  <div class="card" data-toggle="modal" data-target=
  <% if @current.points >= 50 %>
  "#check1"
  <% else %>
  "#insufficient"
  <% end %>
    >
    <img class="card-img-top" src="/assets/smoothie.jpg" alt="Card image cap">
    <div class="card-body">
      <h5 class="card-title text-center">Free Smoothie</h5>
      <p class="card-text text-right">50 Reward Points</p>
    </div>
  </div>
  <div class="card" data-toggle="modal" data-target=
  <% if @current.points >= 250 %>
  "#check2"
  <% else %>
  "#insufficient"
  <% end %>
    >
    <img class="card-img-top" src="/assets/takealot.jpg" alt="Card image cap">
    <div class="card-body">
      <h5 class="card-title text-center">R200 Takealot Voucher</h5>
      <p class="card-text text-right">250 Reward Points</p>
    </div>
  </div>
</div>
<br>
<br>
<h3 align="center"> You're signed in as:  <%= @current.email %> </h1><br>

<div align="center">
	<a class="btn btn-info btn-lg" href="/landing">Home</a>
</div>

<!-- confirmation modal item 1 -->
<div class="modal fade" id="check1" tabindex="-1" role="dialog" aria-labelledby="check1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="check1">Confirm Purchase</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Are you sure you would like to redeem a smoothie?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <a class="btn btn-primary" href="/item1" >Redeem Item</a>
      </div>
    </div>
  </div>
</div>


<!-- confirmation modal item 2 -->
<div class="modal fade" id="check2" tabindex="-1" role="dialog" aria-labelledby="check2" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="check2">Confirm Purchase</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Are you sure you would like to redeem a takealot voucher?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <a class="btn btn-primary" href="/item2" >Redeem Item</a>
      </div>
    </div>
  </div>
</div>

<!-- insufficient points modal -->
<div class="modal fade" id="insufficient" tabindex="-1" role="dialog" aria-labelledby="insufficient" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="insufficient">Sorry!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        You have insufficent reward points.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<!-- success modal -->
<div class="modal fade" id="success" tabindex="-1" role="dialog" aria-labelledby="success" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="success">Item Redeemed!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        A confirmation email has been sent to you with your voucher code.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
